---
layout: post
title: Blog Refresh
---
<p>It's been long overdue, but I've given my blog a facelift, and a brand new domain. I wasn't content with the .net domain, and my name is just far too common to have that many choices, so I went with one of the few I could come up with that was available, <a href="/">JustCramer.com</a>. I figured that with the domain move, I'd also go ahead and get off of WordPress and refresh the design at the same time.</p>

<p>The new blog is powered off of <a href="https://github.com/mojombo/jekyll">Jekyll</a> and is running off of the <a href="http://pages.github.com">GitHub Pages technology</a>. I decided to use the <a href="http://html5boilerplate.com/">HTML5 Boilerplate</a> project as a starter for the new design, and it's turned out pretty well. If you're curious, the source is available on <a href="https://github.com/dcramer/dcramer.github.com">GitHub</a> as always.</p>

<p>Importing posts from WordPress turned out to be quite the challenge. Jekyll included a tool to translate the posts (for the most part) to HTML pages, and it worked decently. Though there were a few hurdles to overcome.</p>

<p>The first problem was I had been using a syntax highlighting plugin in WordPress that worked by using <code>pre</code> tags with a <code>lang</code> attribute. For example, <code>&lt;pre lang="python"&gt;</code>. These all had to be translated to the <code>&#123;% highlight %&#125;</code> tags supported by Jekyll (on top of Pygments).</p>

<p>Next up we actually had to deal with outputting &#123; and &#125; characters without Liquid (the template language Jekyll uses) parsing them. Just like Django, it seems they didn't see the need to have some kind of raw escape tag (don't get me started on the <code>templatetag</code> template tag in Django). After a bit of Googling I discovered the entities for these characters were <code>&amp;#123;</code> and <code>&amp;#125;</code>.</p>

<p>After getting the pages mostly working, I realized they were all in .markdown. While I have nothing against markdown, it didn't seem to play nice with some of my html. For example, it didn't like lines that started with HTML tags. Not caring to figure out how to work around this, I decided I'd try to convert all HTML to Markdown. I attempted with both <a href="http://milianw.de/projects/markdownify/">Markdownify</a> (PHP) and a project called <a href="http://www.aaronsw.com/2002/html2text/">html2text</a> (Python). Both projects didn't work out.In the end I decided I would just swap all pages over to HTML. </p>

{% highlight bash %}
for x in *.dot;
do
  mv "$x" "${x%.markdown}.html";
done
{% endhighlight %}

<p>Now that I had renamed all of the files, it quickly came to my attention that I was going to have to deal with paragraphs. To do this I wrote a quick script that would iterate all of the files and replace lines which appeared to be actual paragraphs, with paragraph tags. If you're curious about this script, you can find it <a href="https://github.com/dcramer/dcramer.github.com/blob/master/_import/fix-linebreaks.py">in the source</a>.</p>

<p>The last big hurdle I had to deal with was rewriting permalinks. This was a bigger challenge that I expected. My entire goal here was to be based on free services and handling redirects requires some logic. By suggestion of <a href="http://anton.kovalyov.net">Anton Kovalyov</a> I reluctantly decided I would write a quick AppEngine app.</p>

<p>After a few wacky ideas I decided that the simplest solution would just be to write a URL mapper using origin and destination columns. With this in mind, I quickly whipped up a PHP script to dump my entire database of posts into a CSV file. The file converted the old permalinks (on davidcramer.net) to the new style. Finishing up the AppEngine app was fairly straight forward after this was ready. It included a CSV importer (to throw data into my datastore model), and handling the redirect part was painless. Again, if you're curious, the <a href="https://github.com/dcramer/davidcramer-redirect">source</a> is on GitHub.</p>

<p>I still have to deal with migrating URLs for Disqus, but let me know if you have any feedback on the new blog, it's design, or just anything in general. Thanks!</p>
